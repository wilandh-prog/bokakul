<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BokaKul - √ñva Bokf√∂ring</title>
    <meta name="description" content="√ñva bokf√∂ring p√• ett roligt s√§tt. L√§r dig kontera aff√§rsh√§ndelser med direkt feedback.">
    <meta name="theme-color" content="#667eea">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìö</text></svg>">
    <link rel="stylesheet" href="style.css">
    <!-- Google Analytics - laddas endast efter samtycke -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}

        function loadGoogleAnalytics() {
            var script = document.createElement('script');
            script.async = true;
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-YFZ26E07SE';
            document.head.appendChild(script);
            gtag('js', new Date());
            gtag('config', 'G-YFZ26E07SE');
        }

        // Kolla om anv√§ndaren redan gett samtycke
        if (localStorage.getItem('cookieConsent') === 'accepted') {
            loadGoogleAnalytics();
        }
    </script>
</head>
<body>
    <a href="#main-content" class="skip-link">Hoppa till huvudinneh√•ll</a>
    <div class="container" role="application" aria-label="BokaKul bokf√∂rings√∂vning">
        <header>
            <div class="header-top">
                <h1>üìö BokaKul</h1>
                <div class="header-badge" id="best-badge-container" aria-label="Din b√§sta utm√§rkelse">
                    <span id="best-badge" class="best-badge" aria-hidden="true">üîí</span>
                    <span id="best-badge-name" class="best-badge-name">Ingen √§nnu</span>
                </div>
            </div>
            <div class="stats" role="status" aria-live="polite" aria-label="Spelstatistik">
                <div class="stat primary">
                    <span class="label">Po√§ng</span>
                    <span id="score" class="value">0</span>
                </div>
                <div class="stat primary">
                    <span class="label">Niv√•</span>
                    <span id="level" class="value">1</span>
                </div>
                <div class="stat">
                    <span class="label">üî• Streak</span>
                    <span id="streak" class="value streak-value">0</span>
                </div>
                <div class="stat highlight">
                    <span class="label">üèÜ Highscore</span>
                    <span id="high-score" class="value">0</span>
                </div>
                <div class="stat session-stat">
                    <span class="label">Session</span>
                    <span id="session-stats" class="value">0/0</span>
                </div>
            </div>
        </header>

        <main id="main-content" aria-label="√ñvningsomr√•de">
            <div class="level-selector">
                <label for="level-select" class="level-label">V√§lj niv√•</label>
                <select id="level-select" class="level-dropdown">
                    <option value="1">Niv√• 1 - Grundl√§ggande</option>
                    <option value="2">Niv√• 2 - F√∂rs√§ljning och ink√∂p utan moms</option>
                    <option value="3">Niv√• 3 - Transaktioner med 25% moms</option>
                    <option value="4">Niv√• 4 - Momsredovisning</option>
                    <option value="5">Niv√• 5 - Resultatr√§kning</option>
                    <option value="6">Niv√• 6 - Kreditfakturor, r√§nta och kontokort</option>
                    <option value="7">Niv√• 7 - L√∂ner</option>
                    <option value="8">Niv√• 8 - Periodiseringar och avyttringar</option>
                </select>
            </div>

            <div class="event-card">
                <div class="event-header">
                    <h2>Aff√§rsh√§ndelse</h2>
                    <span id="event-counter" class="event-counter"></span>
                </div>
                <p id="event-description" class="event-description"></p>
            </div>

            <div class="booking-area">
                <h3>Kontera h√§ndelsen:</h3>

                <div class="booking-order">
                    <table class="booking-table">
                        <thead>
                            <tr>
                                <th colspan="2">Konto</th>
                                <th>Debet</th>
                                <th>Kredit</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="booking-entries">
                            <!-- Bokf√∂ringsrader kommer h√§r -->
                        </tbody>
                        <tfoot>
                            <tr class="totals-row">
                                <td colspan="2"><strong>Summa</strong></td>
                                <td id="total-debet" class="total-cell">0</td>
                                <td id="total-kredit" class="total-cell">0</td>
                                <td></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>

                <div id="mini-balance" class="mini-balance" style="display: none;">
                    <div class="balance-title">Balansr√§kning</div>
                    <div class="balance-columns">
                        <div class="balance-column tillgangar">
                            <h4>Tillg√•ngar</h4>
                            <div id="balance-assets"></div>
                            <div class="balance-sum" id="sum-assets">0</div>
                        </div>
                        <div class="balance-column skulder">
                            <h4>Skulder + EK</h4>
                            <div id="balance-liabilities"></div>
                            <div class="balance-sum" id="sum-liabilities">0</div>
                        </div>
                    </div>
                </div>

                <button id="add-row" class="btn btn-secondary">+ L√§gg till rad</button>
            </div>

            <div class="controls" role="group" aria-label="√Ötg√§rder">
                <button id="check-answer" class="btn btn-primary" aria-label="Kontrollera ditt svar (Enter)">Kontrollera svar</button>
                <button id="next-event" class="btn btn-primary" style="display: none;" aria-label="G√• till n√§sta h√§ndelse (Enter)">N√§sta h√§ndelse ‚Üí</button>
                <button id="skip-event" class="btn btn-skip" aria-label="Hoppa √∂ver uppgiften (r√§knas som fel)">Hoppa √∂ver</button>
                <button id="show-hint" class="btn btn-hint" aria-label="Visa ledtr√•d">üí° Ledtr√•d</button>
            </div>

            <div id="feedback" class="feedback" style="display: none;"></div>

            <div id="hint" class="hint" style="display: none;"></div>
        </main>

        <aside class="sidebar">
            <div class="achievements-section">
                <h3>üèÖ Utm√§rkelser</h3>
                <div id="achievements-list" class="achievements-list"></div>
            </div>

            <div class="account-plan">
                <h3>Kontoplan</h3>
                <div id="account-list" class="account-list"></div>
            </div>
        </aside>
    </div>

    <script src="app.js"></script>

    <!-- Cookie Banner -->
    <div id="cookie-banner" class="cookie-banner" style="display: none;">
        <div class="cookie-content">
            <p>Vi anv√§nder cookies f√∂r att analysera hur webbplatsen anv√§nds.</p>
            <div class="cookie-buttons">
                <button id="cookie-accept" class="btn btn-primary">Acceptera</button>
                <button id="cookie-decline" class="btn btn-secondary">Avb√∂j</button>
            </div>
        </div>
    </div>

    <script>
        // Visa cookie-banner om inget val gjorts
        if (!localStorage.getItem('cookieConsent')) {
            document.getElementById('cookie-banner').style.display = 'flex';
        }

        document.getElementById('cookie-accept').addEventListener('click', function() {
            localStorage.setItem('cookieConsent', 'accepted');
            document.getElementById('cookie-banner').style.display = 'none';
            loadGoogleAnalytics();
        });

        document.getElementById('cookie-decline').addEventListener('click', function() {
            localStorage.setItem('cookieConsent', 'declined');
            document.getElementById('cookie-banner').style.display = 'none';
        });
    </script>
</body>
</html>
